/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013
 * @version 1.0.0
 * For more JQuery plugins visit http://plugins.krajee.com
 */(function($){var h=1;var j=5;var k=1;var l=function(a,b){return a===null||a===undefined||a==[]||a===''||b&&$.trim(a)===''};var m=function(a,b,c){var d=l(a.data(b))?a.attr(b):a.data(b);if(d){return d}return c[b]};var n=function(a,b){this.$element=$(a);this.options=b;this.min=(b.min>=0)?b.min:this._parseAttr('min',b);this.max=(b.max>=0)?b.max:this._parseAttr('max',b);this.step=(b.step>0)?b.step:this._parseAttr('step',b);if(isNaN(this.min)){this.min=h}if(isNaN(this.max)){this.max=j}if(isNaN(this.step)){this.step=k}this.checkDisabled();this.rtl=b.rtl;this.showClear=b.showClear;this.showCaption=b.showCaption;this.size=b.size;this.defaultCaption=b.defaultCaption;this.starCaptions=b.starCaptions;this.starCaptionClasses=b.starCaptionClasses;this.clearButton=b.clearButton;this.clearButtonTitle=b.clearButtonTitle;this.clearCaption=b.clearCaption;this.clearCaptionClass=b.clearCaptionClass;this.clearValue=b.clearValue;this.$clearElement=b.clearElement;this.$captionElement=b.captionElement;this.$container=this.createContainer();this.$star=this.$container.children("s");this.$stars=this.$container.find("s");this.$clear=!l(this.$clearElement)?this.$clearElement:this.$container.find(".clear-rating");this.$caption=!l(this.$captionElement)?this.$captionElement:this.$container.find(".caption");this._init();this.initialValue=parseFloat(this.$element.val())};n.prototype={constructor:n,_parseAttr:function(a,b){var c=this,$input=c.$element;if($input.attr('type')==='number'){var d=m($input,a,b);var e=k;if(a==='min'){e=h}else if(a==='max'){e=j}else if(a==='step'){e=k}var f=l(d)?e:d;return parseFloat(f)}return parseFloat(b[a])},_init:function(){var a=this;a.$element.before(a.$container);a.$element.hide();a.$star.on("click",function(e){if(!a.inactive){a.change(e)}});a.$clear.on("click",function(e){if(!a.inactive){a.clear()}});$(a.$element[0].form).on("reset",$.proxy(a.reset,a))},checkDisabled:function(){this.disabled=m(this.$element,'disabled',this.options);this.readonly=m(this.$element,'readonly',this.options);this.inactive=(this.disabled||this.readonly)},getContainerClass:function(){var a=this,css=(a.rtl)?'star-rating-rtl':'star-rating';css+=a.inactive?((a.disabled)?' '+css+'-disabled ':' '):' '+css+'-active ';css+='rating-'+a.size;return css},getClearClass:function(){return((this.inactive)?'clear-rating':'clear-rating clear-rating-active')},createContainer:function(){var a=this,content=a.renderRating();return $(document.createElement("div")).attr({"class":a.getContainerClass()}).html(content)},renderRating:function(){var a=this,stars=a.renderStars(),clear=a.renderClear(),caption=a.renderCaption();return(a.rtl)?caption+stars+clear:clear+stars+caption},renderStars:function(){var a=this,begin='',end='',step=((a.step>0)?a.step:k);var b=parseInt(a.max/step);for(var i=a.min;i<=a.max;i+=step){begin+=(!l(a.$element.val())&&i<=a.$element.val())?'<s class="rated">':'<s>';end+='</s>'}return begin+end},renderClear:function(){var a=this;if(!a.showClear){return''}var b=a.getClearClass();if(!l(a.$clearElement)){a.$clearElement.removeClass(b).addClass(b).attr({"title":a.clearButtonTitle});a.$clearElement.html(a.clearButton);return''}return'<div class="'+b+'" title="'+a.clearButtonTitle+'">'+a.clearButton+'</div>'},renderCaption:function(){var a=this,val=a.$element.val();if(!a.showCaption){return''}var b=a.fetchCaption(val);if(!l(a.$captionElement)){a.$captionElement.removeClass('caption').addClass('caption').attr({"title":a.clearButtonTitle});a.$captionElement.html(b);return''}return'<div class="caption">'+b+'</div>'},fetchCaption:function(a){var b=this;var c=parseFloat(a);var d=l(b.starCaptionClasses[c])?b.clearCaptionClass:b.starCaptionClasses[c];var e=l(b.starCaptions[c])?b.clearCaption:b.starCaptions[c];return'<span class="'+d+'">'+e+'</span>'},change:function(e){var a=this;var b=$(e.target).parentsUntil("div").length+1;b=(b-1)*a.step+a.min;var c=!l(a.starCaptions[b]);var d=(c)?a.starCaptionClasses[b]:a.clearCaptionClass;var f=(c)?a.starCaptions[b]:a.defaultCaption.replace(/\{rating\}/g,b);var g='<span class="'+d+'">'+f+'</span>';a.$element.val(b);a.$caption.html(g);a.$stars.removeClass('rated');$(e.target).removeClass('rated').addClass('rated');$(e.target).parentsUntil("div","s").removeClass('rated').addClass('rated');a.$element.trigger('rating.change',[b,g])},clear:function(){var a=this;var b='<span class="'+a.clearCaptionClass+'">'+a.clearCaption+'</span>';a.$stars.removeClass('rated');a.$caption.html(b);a.$element.val(a.clearValue);a.$element.trigger('rating.clear')},refresh:function(){var a=this;this.initialValue=parseFloat(a.$element.val());a.reset();a.checkDisabled();a.$container.attr({"class":a.getContainerClass()});a.$clear.attr({"class":a.getClearClass()})},reset:function(){var a=this,$container=a.$container,val=a.initialValue,$el=a.$caption;var b='';a.clear();if(val){var c=parseInt(val/a.step);$container.find('s').addClass('rated');for(var i=a.min;i<=c*a.step;i+=a.step){b+=(i===a.min)?'s':' > s'}$container.find(b+' > s').removeClass('rated');if($el){$el.html(a.fetchCaption(val))}}a.$element.trigger('rating.reset')}};$.fn.rating=function(b){var c=Array.apply(null,arguments);c.shift();return this.each(function(){var a=$(this),data=a.data('rating'),options=typeof b==='object'&&b;if(!data){a.data('rating',(data=new n(this,$.extend({},$.fn.rating.defaults,options,$(this).data()))))}if(typeof b==='string'){data[b].apply(data,c)}})};$.fn.rating.defaults={disabled:false,readonly:false,rtl:false,size:'md',showClear:true,showCaption:true,defaultCaption:'{rating} Stars',starCaptions:{1:'One Star',2:'Two Stars',3:'Three Stars',4:'Four Stars',5:'Five Stars'},starCaptionClasses:{1:'label label-danger',2:'label label-warning',3:'label label-info',4:'label label-primary',5:'label label-success'},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:'Clear',clearCaption:'Not Rated',clearCaptionClass:'label label-default',clearValue:0,captionElement:null,clearElement:null};$(function(){var a=$('input.rating[type=number]');if(a.length>0){a.rating()}})}(jQuery));